---
import Layout from "@layouts/Layout.astro";
import { t } from "../i18n";
import BlockHeader from "@components/BlockHeader.astro";

const currentLocale = "zh";

const components = [
	{
		id: "dialog-modal",
		title: "å¯¹è¯æ¡†",
		description:
			"å¯¹è¯æ¡†ç»„ä»¶ï¼Œåœ¨PCç«¯ä¸Mobileç«¯éƒ½æ”¯æŒï¼ŒåŸºäºshadcn/uiçš„Dialogç»„ä»¶å°è£…",
		category: "UI",
		tags: ["dialog", "modal"],
		preview: "dialog-preview",
		code: `
<!-- æŒ‰é’®ç»„ä»¶ç¤ºä¾‹ -->
<button class="btn btn-primary">ä¸»è¦æŒ‰é’®</button>
<button class="btn btn-secondary">æ¬¡è¦æŒ‰é’®</button>
<button class="btn btn-outline">è½®å»“æŒ‰é’®</button>
	`,
	},
];
---

<Layout 
title={t(currentLocale, 'nav.components')}
description={t(currentLocale, 'nav.components')}
>
    <BlockHeader>ç»„ä»¶å±•ç¤º</BlockHeader>
      <!-- æœç´¢å’Œç­›é€‰åŒºåŸŸ -->
    <div class="mb-8 p-4 bg-accent/5 rounded-xl border border-accent/10">
        <div class="flex flex-col sm:flex-row gap-4 items-center justify-between">
        <div class="flex-1 max-w-md">
            <input 
            type="text" 
            placeholder="æœç´¢ç»„ä»¶..." 
            class="w-full px-4 py-2 bg-background border border-accent rounded-lg focus:border-accent focus:outline-none"
            id="search-input"
            />
        </div>
        <div class="flex gap-2">
            <select class="px-3 py-2 text-accent bg-background border border-accent rounded-lg focus:border-accent focus:outline-none">
                <option value="">æ‰€æœ‰åˆ†ç±»</option>
                <option value="UI">UI ç»„ä»¶</option>
                <option value="Layout">å¸ƒå±€ç»„ä»¶</option>
                <option value="Form">è¡¨å•ç»„ä»¶</option>
            </select>
            <button class="px-4 py-2 bg-accent text-background rounded-lg hover:bg-accent/90 transition-colors">
                ç­›é€‰
            </button>
        </div>
        </div>
    </div>
    <!-- ç»„ä»¶ç½‘æ ¼ -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {components.map((component) => (
      <div class="component-card bg-background border border-accent/10 rounded-xl overflow-hidden hover:border-accent/30 transition-all duration-300 hover:shadow-lg">
        <!-- ç»„ä»¶é¢„è§ˆåŒºåŸŸ -->
        <div class="p-6 bg-accent/5 border-b border-accent/10">
          <div class="flex items-center justify-between mb-3">
            <h3 class="text-lg font-semibold text-accent">{component.title}</h3>
            <span class="px-2 py-1 text-xs bg-accent/20 text-accent rounded-full">
              {component.category}
            </span>
          </div>
          <p class="text-sm text-accent mb-4">{component.description}</p>
          
          <!-- é¢„è§ˆåŒºåŸŸ -->
          <div class="preview-area bg-background border border-accent rounded-lg p-4 min-h-[120px] flex items-center justify-center">
            <div class="text-center">
              <div class="text-4xl mb-2">ğŸ¨</div>
              <p class="text-sm text-foreground/60">ç»„ä»¶é¢„è§ˆ</p>
            </div>
          </div>
        </div>

        <!-- ä»£ç å±•ç¤ºåŒºåŸŸ -->
        <div class="p-4">
          <div class="flex items-center justify-between mb-3">
            <span class="text-sm font-medium text-accent">ä»£ç ç¤ºä¾‹</span>
            <button 
              class="copy-btn text-xs px-2 py-1 bg-accent/10 text-accent rounded hover:bg-accent/20 transition-colors"
              data-code={component.code}
            >
              å¤åˆ¶
            </button>
          </div>
          <pre class="code-block text-xs bg-accent/5 border border-accent rounded-lg p-3 overflow-x-auto">
            <code class="text-accent">{component.code}</code>
          </pre>
        </div>

        <!-- æ ‡ç­¾åŒºåŸŸ -->
        <div class="px-4 pb-4">
          <div class="flex flex-wrap gap-1">
            {component.tags.map((tag) => (
              <span class="text-xs px-2 py-1 bg-accent/10 text-accent rounded-full">
                #{tag}
              </span>
            ))}
          </div>
        </div>
      </div>
    ))}
  </div>
</Layout>

<style>
    .component-card {
        transition: all 0.3s ease;
    }
    .component-card:hover {
        transform:translateY(-2px);
    }

    .preview-area {
        min-height: 120px;
    }

    .code-block {
        font-family: 'JetBrains Mono Variable', monospace;
    }
</style>
<script>
   // æœç´¢åŠŸèƒ½
  const searchInput = document.getElementById('search-input');
  const componentCards = document.querySelectorAll('.component-card');
  
  searchInput?.addEventListener('input', (e) => {
    const searchTerm = (e.target as HTMLInputElement).value.toLowerCase();
    
    componentCards.forEach((card) => {
      const title = card.querySelector('h3')?.textContent?.toLowerCase() || '';
      const description = card.querySelector('p')?.textContent?.toLowerCase() || '';
      const tags = Array.from(card.querySelectorAll('span')).map(span => span.textContent?.toLowerCase()).join(' ');
      
      const isMatch = title.includes(searchTerm) || 
                     description.includes(searchTerm) || 
                     tags.includes(searchTerm);
      
      (card as HTMLElement).style.display = isMatch ? 'block' : 'none';
    });
  });

  // å¤åˆ¶ä»£ç åŠŸèƒ½
  document.querySelectorAll('.copy-btn').forEach(btn => {
    btn.addEventListener('click', async (e) => {
      const button = e.target as HTMLButtonElement;
      const code = button.dataset.code || '';
      
      try {
        await navigator.clipboard.writeText(code);
        button.textContent = 'å·²å¤åˆ¶!';
        setTimeout(() => {
          button.textContent = 'å¤åˆ¶';
        }, 2000);
      } catch (err) {
        console.error('å¤åˆ¶å¤±è´¥:', err);
      }
    });
  });
</script>